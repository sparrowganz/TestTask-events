# TestTask-events
Test Task for SayGames Company. Include web service for getting and saving events

---
## Task

–ö–ª–∏–µ–Ω—Ç –ø–æ—Å—ã–ª–∞–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –ø–∞—á–∫–∞–º–∏ –≤ –≤–∏–¥–µ POST –∑–∞–ø—Ä–æ—Å–∞, –≤ —Ç–µ–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ JSON –æ–±—ä–µ–∫—Ç—ã, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ \n.
–ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç - —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ. –û–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç —Ç–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–≤ –ø—Ä–∏–º–µ—Ä–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON, –≤ –∑–∞–ø—Ä–æ—Å–µ - –Ω–µ—Ç):

{
"client_time":"2020-12-01 23:59:00",
"device_id":"0287D9AA-4ADF-4B37-A60F-3E9E645C821E",
"device_os":"iOS 13.5.1",
"session":"ybuRi8mAUypxjbxQ",
"sequence":1,
"event":"app_start",
"param_int":0,
"param_str":"some text"
}

–ö–ª–∏–µ–Ω—Ç—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π RPS –Ω–∞ —Å–µ—Ä–≤–µ—Ä - 200, —Å—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ —Å–æ–±—ã—Ç–∏–π –≤ –∑–∞–ø—Ä–æ—Å–µ - 30.

–ó–∞–¥–∞—á–∞ - –Ω–∞–ø–∏—Å–∞—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ —Ç–∞–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π, –∏—Ö –æ–±–æ–≥–∞—â–µ–Ω–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∏ –≤ –ë–î.
–ò–¥–µ–∞–ª—å–Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —ç—Ç—É —Å–∏—Å—Ç–µ–º—É –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–∞—á–∫–µ.

–°–µ—Ä–≤–µ—Ä –ø–∏—à–µ–º –Ω–∞ Go, —É–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ —Ñ–∏—á–∏ - goroutines, channels.

–í –∫–∞—á–µ—Å—Ç–≤–µ –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ–º ClickHouse, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å, —Å–æ–∑–¥–∞—Ç—å –≤ –Ω–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—á–∫—É.

–ö–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–ª–∏–≤–∞–µ–º –≤ –ª—é–±–æ–π git.

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Å–æ–±—ã—Ç–∏–µ –¥–≤–∞ –ø–æ–ª—è - ip –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞:

    "ip":"8.8.8.8",
    "server_time":"2020-12-01 23:53:00"

–í—Å–µ, —á—Ç–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —è–≤–Ω–æ –≤ –∑–∞–¥–∞–Ω–∏–∏, –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ç–≤–æ–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ.

---

## –†–µ–∑—é–º–∏—Ä—É—è
–î–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ª–∏—à–µ–Ω–æ –æ–≥—Ä–µ—Ö–æ–≤ –∏ –æ—à–∏–±–æ–∫ –∏ –Ω–æ—Å–∏—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.
–¢–∞–∫–∏—Ö –∫–∞–∫: 
- –ß–µ—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤.
- –û–¥–∏–Ω–∞—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ clickhouse (max 100 –¥–∞–ª—å—à–µ –æ—à–∏–±–∫–∞—Ö)
- –∏—Ç–¥

–í  –Ω–∞—á–∞–ª–µ –±—ã–ª–æ –≤ –ø–ª–∞–Ω–∞—Ö —Å–¥–µ–ª–∞—Ç—å –≤—Å–µ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä kafka –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞ –≤–æ—Ä–∫–µ—Ä—ã. 
–ù–æ —Ç–∞—Å–∫–∞ –∂–µ –Ω–∞ golang —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.üòÇ

–í —ç—Ç–æ–º —Ç–µ—Å—Ç–æ–≤–æ–º –∑–∞–¥–∞–Ω–∏–∏ —è –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–∏ —É–º–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –∫–æ–¥, –∞ —Ç–∞–∫ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º—ã—Å–ª–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ.

–ù–∞ –º–æ–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Å–µ—Ä–≤–µ—Ä –≤—ã–¥–µ—Ä–∂–∞–ª –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—É—é –Ω–∞–≥—Ä—É–∑–∫—É. (–ù–µ —Å—á–∏—Ç–∞—è –ø–æ—Ç–µ—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∏—Ö –µ–≤–µ–Ω—Ç–æ–≤)

```Server Software:        
Server Hostname:        localhost
Server Port:            8080

Document Path:          /api/events
Document Length:        0 bytes

Concurrency Level:      300
Time taken for tests:   13.432 seconds
Complete requests:      5000
Failed requests:        10
   (Connect: 10, Receive: 0, Length: 0, Exceptions: 0)
Total transferred:      375000 bytes
Total body sent:        32985000
HTML transferred:       0 bytes
Requests per second:    372.24 [#/sec] (mean)
Time per request:       805.929 [ms] (mean)
Time per request:       2.686 [ms] (mean, across all concurrent requests)
Transfer rate:          27.26 [Kbytes/sec] received
                        2398.12 kb/s sent
                        2425.39 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    2  12.2      0     102
Processing:     8  785 350.3    750    2338
Waiting:        7  735 322.2    702    2314
Total:          9  788 348.6    752    2338

Percentage of the requests served within a certain time (ms)
  50%    752
  66%    930
  75%   1002
  80%   1070
  90%   1228
  95%   1385
  98%   1643
  99%   1735
 100%   2338 (longest request)
```
–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–Ω—è–ª–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ 1–º–∏–Ω (–¥–æ–ª–µ—Ç–∞–ª–∏ –µ–≤–µ–Ω—Ç—ã –≤ –±–∞–∑—É)
–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –ø–æ—è–≤–∏–ª–∏—Å—å 149939 –Ω–æ–≤—ã—Ö –µ–≤–µ–Ω—Ç–∞ –≤ –±–∞–∑–µ



